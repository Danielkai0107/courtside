# 計分頁面顯示修復

## 🐛 問題描述

**計分頁面是空的** - 進入計分頁面後沒有顯示任何內容

## 🔍 問題原因

### 原有邏輯（不完整）

```typescript
{(match.status === "scheduled" || match.status === "SCHEDULED") && (
  // 顯示「開始比賽」按鈕
)}

{(match.status === "live" || match.status === "IN_PROGRESS" || ...) && (
  // 顯示計分板
)}
```

**問題**：

- 遺漏了 `PENDING_PLAYER` 狀態（等待選手晉級）
- 遺漏了 `PENDING_COURT` 狀態（等待場地分配）
- 這兩個狀態沒有對應的 UI
- 導致頁面空白

### 比賽狀態流程

```
PENDING_PLAYER  ← 第二輪比賽，等待第一輪完成
    ↓
PENDING_COURT   ← 選手已確定，等待分配場地
    ↓
SCHEDULED       ← 已分配場地，等待開始
    ↓
IN_PROGRESS     ← 比賽進行中
    ↓
COMPLETED       ← 比賽結束
```

**您遇到的情況**：

- 比賽可能在 `PENDING_PLAYER` 或 `PENDING_COURT` 狀態
- 這兩個狀態沒有 UI → 頁面空白

## 修復方案

### 添加所有狀態的顯示

#### 1. 比賽信息卡片（總是顯示）

```typescript
<Card>
  比賽狀態：等待選手 / 等待場地 / 已排程 / 進行中 / 已結束 場地：Court
  01（如果有）
</Card>
```

#### 2. PENDING_PLAYER 狀態

```typescript
<Card>⏳ 等待選手從上一輪晉級 等待選手 1 晉級 • 等待選手 2 晉級</Card>
```

#### 3. PENDING_COURT 狀態

```typescript
<Card>⏳ 等待主辦方分配場地 Alice/Bob vs Carol/Dave</Card>
```

#### 4. SCHEDULED 狀態

```typescript
<Card>
  確認雙方選手到場後，點擊下方按鈕開始比賽 Alice/Bob vs Carol/Dave [開始比賽]
</Card>
```

#### 5. IN_PROGRESS 狀態

```typescript
計分板
[+1 選手 A] [+1 選手 B]
[復原] [結束比賽]
```

#### 6. COMPLETED 狀態

```typescript
比賽已結束
Alice/Bob 獲勝
```

## 🎨 修復後的完整 UI

### PENDING_PLAYER（等待晉級）

```
┌────────────────────────────────┐
│ 計分板                         │
├────────────────────────────────┤
│ 比賽狀態：等待選手             │
│ 場地：-                        │
├────────────────────────────────┤
│ ⏳ 等待選手從上一輪晉級       │
│ 等待選手 1 晉級 • 等待選手 2晉級│
└────────────────────────────────┘
```

### PENDING_COURT（等待場地）

```
┌────────────────────────────────┐
│ 計分板                         │
├────────────────────────────────┤
│ 比賽狀態：等待場地             │
├────────────────────────────────┤
│ ⏳ 等待主辦方分配場地         │
│                                │
│ 測試選手 Alice 1               │
│        vs                      │
│ 測試選手 Bob 1                 │
└────────────────────────────────┘
```

### SCHEDULED（可以開始）

```
┌────────────────────────────────┐
│ 計分板                         │
├────────────────────────────────┤
│ 比賽狀態：已排程               │
│ 場地：Court 01                 │
├────────────────────────────────┤
│ 確認雙方選手到場後，           │
│ 點擊下方按鈕開始比賽           │
│                                │
│ 測試選手 Alice 1               │
│        vs                      │
│ 測試選手 Bob 1                 │
│                                │
│ [開始比賽]                     │
└────────────────────────────────┘
```

### IN_PROGRESS（進行中） 原有

```
┌────────────────────────────────┐
│ 計分板              🔴 LIVE    │
├────────────────────────────────┤
│ 測試選手 Alice 1      21       │
│        VS                      │
│ 測試選手 Bob 1        19       │
├────────────────────────────────┤
│ [+1 Alice] [+1 Bob]           │
│ [復原] [結束比賽]             │
└────────────────────────────────┘
```

### COMPLETED（已結束） 原有

```
┌────────────────────────────────┐
│ 計分板                         │
├────────────────────────────────┤
│ 測試選手 Alice 1      21  ✓   │
│        VS                      │
│ 測試選手 Bob 1        19       │
├────────────────────────────────┤
│ 比賽已結束                     │
│ 測試選手 Alice 1 獲勝          │
└────────────────────────────────┘
```

## 📊 狀態完整度

| 狀態           | 修復前 | 修復後       |
| -------------- | ------ | ------------ |
| PENDING_PLAYER | 空白   | 顯示等待訊息 |
| PENDING_COURT  | 空白   | 顯示等待訊息 |
| SCHEDULED      |        |              |
| IN_PROGRESS    |        |              |
| COMPLETED      |        |              |

## 🎯 使用場景

### 場景 1：第二輪比賽（PENDING_PLAYER）

```
1. 紀錄員點擊第二輪的比賽
2. 看到：
   「⏳ 等待選手從上一輪晉級」
   「等待選手 1 晉級 • 等待選手 2 晉級」
3. 第一輪完成後
4. 頁面自動更新（即時監聽）
5. 狀態變為 PENDING_COURT 或 SCHEDULED
```

### 場景 2：第一輪比賽（PENDING_COURT）

```
1. 紀錄員點擊第一輪的比賽
2. 看到：
   「⏳ 等待主辦方分配場地」
   「測試選手 Alice 1 vs 測試選手 Bob 1」
3. 主辦方分配場地後
4. 狀態變為 SCHEDULED
5. 顯示「開始比賽」按鈕
```

### 場景 3：已排程比賽（SCHEDULED）

```
1. 紀錄員點擊已分配場地的比賽
2. 看到：
   比賽狀態：已排程
   場地：Court 01
   選手對陣
   [開始比賽] 按鈕
3. 點擊「開始比賽」
4. 進入計分界面
```

## 📋 修改清單

### 修改文件

- `src/pages/scorer/ScoringConsole.tsx`
- 添加比賽信息卡片（總是顯示）
- 添加 PENDING_PLAYER 狀態 UI
- 添加 PENDING_COURT 狀態 UI
- 優化 SCHEDULED 狀態 UI
- 添加選手預覽

- `src/pages/scorer/ScoringConsole.module.scss`
- 添加比賽信息樣式
- 添加等待狀態樣式
- 添加選手預覽樣式

## 測試檢查清單

- [x] PENDING_PLAYER 狀態顯示
- [x] PENDING_COURT 狀態顯示
- [x] SCHEDULED 狀態顯示
- [x] IN_PROGRESS 狀態顯示
- [x] COMPLETED 狀態顯示
- [x] 比賽信息顯示
- [x] 場地信息顯示
- [x] 選手名稱顯示

## 🎊 完成

**計分頁面現在所有狀態都有對應的 UI！**

- 不再出現空白頁面
- 所有比賽狀態都有清晰提示
- 紀錄員知道如何操作
- 即時監聽自動更新

**無論什麼狀態都有內容顯示！** 🎉

---

**修復日期**: 2024 年 12 月 21 日  
**問題**: 計分頁面空白  
**原因**: 遺漏部分狀態的 UI  
**解決**: 添加所有狀態的顯示  
**狀態**: 已修復
