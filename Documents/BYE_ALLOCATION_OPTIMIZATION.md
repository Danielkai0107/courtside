# BYE åˆ†é…é‚è¼¯å„ªåŒ–

## ğŸ¯ å•é¡Œåˆ†æ

### æ‚¨çš„ç†è§£å®Œå…¨æ­£ç¢ºï¼

**ç•¶å‰é‚è¼¯ï¼ˆæœ‰å•é¡Œï¼‰**ï¼š

```
10 çµ„å ±å â†’ 16 å¼·æ¨¹ç‹€åœ–
10 å€‹çœŸå¯¦é¸æ‰‹ + 6 å€‹ BYE = 16 å€‹ä½ç½®
â†“
å®Œå…¨éš¨æ©Ÿæ´—ç‰Œ
â†“
å¯èƒ½çµæœï¼š
  Alice vs BYE     â† è¼ªç©ºï¼ˆæµªè²»ï¼‰
  Bob vs Carol     â† çœŸå¯¦æ¯”è³½
  Dave vs BYE      â† è¼ªç©ºï¼ˆæµªè²»ï¼‰
  Eve vs Frank     â† çœŸå¯¦æ¯”è³½
  Grace vs BYE     â† è¼ªç©ºï¼ˆæµªè²»ï¼‰
  Henry vs Ivy     â† çœŸå¯¦æ¯”è³½
  Jack vs BYE      â† è¼ªç©ºï¼ˆæµªè²»ï¼‰
  Kate vs BYE      â† è¼ªç©ºï¼ˆæµªè²»ï¼‰

ç¬¬ä¸€è¼ªï¼šåªæœ‰ 3 å ´çœŸå¯¦æ¯”è³½ï¼Œ7 å ´è¼ªç©ºï¼âŒ
â†’ 10 å€‹äººæ˜æ˜å¯ä»¥äº’æ‰“ 5 å ´ï¼Œå»åªæ‰“ 3 å ´
```

### åˆç†çš„é‚è¼¯ï¼ˆæ‡‰è©²æ”¹æˆï¼‰

**æ–¹æ¡ˆ Aï¼šå„ªå…ˆé…å°çœŸå¯¦é¸æ‰‹** â­ æ¨è–¦

```
10 çµ„å ±å â†’ 16 å¼·æ¨¹ç‹€åœ–

ç­–ç•¥ï¼šå…ˆé…å°çœŸå¯¦é¸æ‰‹ï¼Œå‰©ä¸‹çš„æ‰çµ¦ BYE

é…å°çµæœï¼š
  Alice vs Bob     â† çœŸå¯¦æ¯”è³½
  Carol vs Dave    â† çœŸå¯¦æ¯”è³½
  Eve vs Frank     â† çœŸå¯¦æ¯”è³½
  Grace vs Henry   â† çœŸå¯¦æ¯”è³½
  Ivy vs Jack      â† çœŸå¯¦æ¯”è³½
  Kate vs BYE      â† è¼ªç©ºï¼ˆ1 å€‹ï¼‰
  BYE vs BYE       â† ç©ºä½ï¼ˆ5 å€‹ï¼Œç›´æ¥è·³éï¼‰

ç¬¬ä¸€è¼ªï¼š5 å ´çœŸå¯¦æ¯”è³½ï¼Œ1 å ´è¼ªç©º
â†’ æœ€å¤§åŒ–çœŸå¯¦æ¯”è³½æ•¸é‡
```

**æ–¹æ¡ˆ Bï¼šæ¨™æº–ç¨®å­ä½é‚è¼¯**

```
ä½¿ç”¨æ¨™æº–çš„ç¨®å­ä½æ’åˆ—
é«˜ç¨®å­ vs ä½ç¨®å­/BYE

1è™Ÿä½ vs 16è™Ÿä½(BYE)
2è™Ÿä½ vs 15è™Ÿä½(BYE)
3è™Ÿä½ vs 14è™Ÿä½
4è™Ÿä½ vs 13è™Ÿä½(BYE)
...

å„ªé»ï¼š
  - ä¿è­·é«˜ç¨®å­é¸æ‰‹ï¼ˆå¦‚æœæœ‰æ’åï¼‰
  - ç¬¦åˆåœ‹éš›æ¨™æº–

ç¼ºé»ï¼š
  - éœ€è¦ç¨®å­æ’åºç³»çµ±
  - å°å¹³ç­‰è³½äº‹ä¸é©ç”¨
```

## ğŸ”§ å„ªåŒ–æ–¹æ¡ˆå¯¦æ–½

### æ¨è–¦ï¼šæ–¹æ¡ˆ Aï¼ˆå„ªå…ˆé…å°ï¼‰

```typescript
// å„ªåŒ–çš„ BYE åˆ†é…é‚è¼¯
export const generateKnockoutOnly = async (...) => {
  const n = teams.length;
  const bracketSize = Math.pow(2, Math.ceil(Math.log2(n)));
  const byeCount = bracketSize - n;

  // æ´—ç‰ŒçœŸå¯¦é¸æ‰‹
  const shuffledTeams = shuffleArray(teams);

  // ç­–ç•¥ï¼šå„ªå…ˆé…å°çœŸå¯¦é¸æ‰‹
  const slots: PlayerSlot[] = [];

  // 1. å…ˆé…å°çœŸå¯¦é¸æ‰‹ï¼ˆå…©å…©ä¸€çµ„ï¼‰
  const pairCount = Math.floor(n / 2);
  for (let i = 0; i < pairCount * 2; i++) {
    slots.push(shuffledTeams[i]);
  }

  // 2. å¦‚æœæœ‰å¥‡æ•¸å€‹çœŸå¯¦é¸æ‰‹ï¼Œçµ¦ä»–ä¸€å€‹ BYE
  if (n % 2 === 1) {
    slots.push(shuffledTeams[n - 1]);  // æœ€å¾Œä¸€å€‹çœŸå¯¦é¸æ‰‹
    slots.push("BYE");                  // é…ä¸€å€‹ BYE
  }

  // 3. å‰©ä¸‹çš„éƒ½æ˜¯ BYE vs BYEï¼ˆæœƒè¢«è·³éï¼‰
  const remainingByes = byeCount - (n % 2 === 1 ? 1 : 0);
  for (let i = 0; i < remainingByes; i++) {
    slots.push("BYE");
  }

  // ä¸å†å®Œå…¨æ´—ç‰Œï¼Œä¿æŒé…å°é‚è¼¯
  // const shuffledSlots = shuffleArray(slots); â† ç§»é™¤

  // å»ºç«‹å°æˆ°æ¨¹...
};
```

### æ•ˆæœå°æ¯”

#### 10 çµ„åƒè³½

**èˆŠé‚è¼¯ï¼ˆéš¨æ©Ÿï¼‰**ï¼š

```
å¯èƒ½ç¬¬ä¸€è¼ªï¼š
  çœŸå¯¦ vs çœŸå¯¦ï¼š2-4 å ´
  çœŸå¯¦ vs BYEï¼š4-6 å ´
  BYE vs BYEï¼š0-2 å ´

â†’ é‹æ°£ä¸å¥½å¯èƒ½åªæœ‰ 2 å ´çœŸå¯¦æ¯”è³½ï¼
```

**æ–°é‚è¼¯ï¼ˆå„ªå…ˆé…å°ï¼‰**ï¼š

```
ç¬¬ä¸€è¼ªå›ºå®šï¼š
  çœŸå¯¦ vs çœŸå¯¦ï¼š5 å ´
  çœŸå¯¦ vs BYEï¼š0 å ´
  BYE vs BYEï¼š3 å ´ï¼ˆè·³éï¼‰

â†’ ä¿è­‰æœ€å¤šçœŸå¯¦æ¯”è³½ï¼
```

#### 13 çµ„åƒè³½

**èˆŠé‚è¼¯ï¼ˆéš¨æ©Ÿï¼‰**ï¼š

```
13 çµ„ + 3 BYE = 16 ä½ç½®
å¯èƒ½ç¬¬ä¸€è¼ªï¼š
  çœŸå¯¦ vs çœŸå¯¦ï¼š3-6 å ´
  çœŸå¯¦ vs BYEï¼š1-4 å ´
```

**æ–°é‚è¼¯ï¼ˆå„ªå…ˆé…å°ï¼‰**ï¼š

```
ç¬¬ä¸€è¼ªå›ºå®šï¼š
  çœŸå¯¦ vs çœŸå¯¦ï¼š6 å ´
  çœŸå¯¦ vs BYEï¼š1 å ´
  BYE vs BYEï¼š1 å ´ï¼ˆè·³éï¼‰
```

## å¯¦å‹™è€ƒé‡

### ç‚ºä»€éº¼å„ªå…ˆé…å°æ›´å¥½ï¼Ÿ

1. **å…¬å¹³æ€§**

   - æ‰€æœ‰é¸æ‰‹ï¼ˆæˆ–å¤§éƒ¨åˆ†ï¼‰éƒ½æ‰“ç¬¬ä¸€è¼ª
   - ä¸æœƒæœ‰äººã€Œé‹æ°£å¥½ã€ç›´æ¥è¼ªç©º

2. **è§€è³½æ€§**

   - ç¬¬ä¸€è¼ªæ¯”è³½æ•¸é‡æœ€å¤š
   - æ›´ç²¾å½©

3. **é¸æ‰‹é«”é©—**

   - å ±åæ¯”è³½å°±æ˜¯æƒ³æ‰“çƒ
   - ç›´æ¥è¼ªç©ºæœƒè¦ºå¾—ã€Œç™½ä¾†ä¸€è¶Ÿã€

4. **å ´åœ°åˆ©ç”¨**
   - ç¬¬ä¸€è¼ªå¯ä»¥å¤šå ´åŒæ™‚é€²è¡Œ
   - å……åˆ†åˆ©ç”¨å ´åœ°è³‡æº

### ä»€éº¼æ™‚å€™éœ€è¦ç¨®å­ä½é‚è¼¯ï¼Ÿ

**é©ç”¨å ´æ™¯**ï¼š

- æœ‰é¸æ‰‹æ’å/ç©åˆ†ç³»çµ±
- æƒ³ä¿è­·é«˜ç¨®å­é¸æ‰‹
- å¤§å‹æ­£å¼è³½äº‹

**ä¸é©ç”¨å ´æ™¯**ï¼š

- å¹³ç­‰çš„å‹èª¼è³½
- æ²’æœ‰æ’åç³»çµ±
- å°å‹ç¤¾å€è³½äº‹

**æ‚¨çš„ç³»çµ±å®šä½**ï¼š

- MVP éšæ®µå»ºè­°ç”¨ã€Œå„ªå…ˆé…å°ã€ï¼ˆç°¡å–®å…¬å¹³ï¼‰
- æœªä¾†å¯ä»¥æ·»åŠ ã€Œç¨®å­ä½ã€åŠŸèƒ½

## ğŸ”¢ æ•¸å­¸é©—è­‰

### çœŸå¯¦æ¯”è³½æ•¸é‡è¨ˆç®—

```
n äººåƒè³½ï¼Œè£œåˆ° bracketSize = 2^k

æœ€ä½³ç­–ç•¥ï¼ˆå„ªå…ˆé…å°ï¼‰ï¼š
  ç¬¬ä¸€è¼ªçœŸå¯¦æ¯”è³½ = floor(n / 2)
  ç¬¬ä¸€è¼ª BYE = n % 2

ç¯„ä¾‹ï¼š
  10 äºº â†’ 5 å ´çœŸå¯¦ + 0 å ´ BYE
  13 äºº â†’ 6 å ´çœŸå¯¦ + 1 å ´ BYE
  15 äºº â†’ 7 å ´çœŸå¯¦ + 1 å ´ BYE
  16 äºº â†’ 8 å ´çœŸå¯¦ + 0 å ´ BYEï¼ˆå®Œç¾ï¼‰
  17 äºº â†’ 8 å ´çœŸå¯¦ + 1 å ´ BYE
```

### ç•¶å‰éš¨æ©Ÿé‚è¼¯çš„å•é¡Œ

```
æœŸæœ›å€¼è¨ˆç®—ï¼š
  10 äºº + 6 BYE = 16 ä½ç½®
  é…å°å¾ŒçœŸå¯¦ vs çœŸå¯¦çš„æ©Ÿç‡ = ?

æ¨¡æ“¬ 100 æ¬¡éš¨æ©Ÿæ´—ç‰Œï¼š
  å¹³å‡çœŸå¯¦æ¯”è³½æ•¸ï¼š~3.1 å ´
  æœ€å°‘ï¼š2 å ´
  æœ€å¤šï¼š5 å ´

â†’ ä¸ç©©å®šï¼Œé‹æ°£æˆåˆ†å¤ªå¤§
```

## ğŸ“‹ å»ºè­°çš„ä¿®å¾©ä»£ç¢¼

```typescript
export const generateKnockoutOnly = async (...) => {
  const n = teams.length;
  const bracketSize = Math.pow(2, Math.ceil(Math.log2(n)));
  const byeCount = bracketSize - n;

  console.log(`ğŸ“Š Players: ${n}, Bracket: ${bracketSize}, Byes: ${byeCount}`);

  // æ´—ç‰ŒçœŸå¯¦é¸æ‰‹ï¼ˆå…¬å¹³æ€§ï¼‰
  const shuffledTeams = shuffleArray(teams);

  // å„ªåŒ–çš„ BYE åˆ†é…ç­–ç•¥
  const slots: PlayerSlot[] = [];

  // ç­–ç•¥ï¼šå…ˆé…å°çœŸå¯¦é¸æ‰‹ï¼Œæœ€å¤§åŒ–ç¬¬ä¸€è¼ªæ¯”è³½æ•¸
  const realMatchCount = Math.floor(n / 2);

  // 1. é…å°çœŸå¯¦é¸æ‰‹ï¼ˆå…©å…©ä¸€çµ„ï¼‰
  for (let i = 0; i < realMatchCount * 2; i++) {
    slots.push(shuffledTeams[i]);
  }

  // 2. å¦‚æœæœ‰å¥‡æ•¸å€‹é¸æ‰‹ï¼Œæœ€å¾Œä¸€å€‹é… BYE
  if (n % 2 === 1) {
    slots.push(shuffledTeams[n - 1]);
    slots.push("BYE");
  }

  // 3. å‰©ä¸‹çš„ä½ç½®å…¨æ˜¯ BYEï¼ˆé€™äº›æœƒè¢« autoProgressByeMatches è·³éï¼‰
  const remainingSlots = bracketSize - slots.length;
  for (let i = 0; i < remainingSlots; i++) {
    slots.push("BYE");
  }

  // ä¸è¦å†æ´—ç‰Œï¼ä¿æŒé…å°é‚è¼¯
  // const shuffledSlots = shuffleArray(slots); â† åˆªé™¤

  // å»ºç«‹å°æˆ°æ¨¹ï¼ˆä½¿ç”¨ slots è€Œé shuffledSlotsï¼‰
  // ...
};
```

## ğŸ¯ ä¿®å¾©å¾Œçš„æ•ˆæœ

### 10 çµ„åƒè³½

```
ç¬¬ä¸€è¼ªï¼ˆR16ï¼‰ï¼š
  Match 1: æ¸¬è©¦é¸æ‰‹ A vs æ¸¬è©¦é¸æ‰‹ B  â† çœŸå¯¦æ¯”è³½
  Match 2: æ¸¬è©¦é¸æ‰‹ C vs æ¸¬è©¦é¸æ‰‹ D  â† çœŸå¯¦æ¯”è³½
  Match 3: æ¸¬è©¦é¸æ‰‹ E vs æ¸¬è©¦é¸æ‰‹ F  â† çœŸå¯¦æ¯”è³½
  Match 4: æ¸¬è©¦é¸æ‰‹ G vs æ¸¬è©¦é¸æ‰‹ H  â† çœŸå¯¦æ¯”è³½
  Match 5: æ¸¬è©¦é¸æ‰‹ I vs æ¸¬è©¦é¸æ‰‹ J  â† çœŸå¯¦æ¯”è³½
  Match 6: BYE vs BYE                 â† è·³é
  Match 7: BYE vs BYE                 â† è·³é
  Match 8: BYE vs BYE                 â† è·³é

å¯¦éš›è¦æ‰“ï¼š5 å ´
è‡ªå‹•æ™‰ç´šï¼š0 äºº
```

### 13 çµ„åƒè³½

```
ç¬¬ä¸€è¼ªï¼ˆR16ï¼‰ï¼š
  Match 1-6: çœŸå¯¦ vs çœŸå¯¦ï¼ˆ12 äººï¼Œ6 å ´ï¼‰
  Match 7: æ¸¬è©¦é¸æ‰‹ M vs BYEï¼ˆ1 å ´è¼ªç©ºï¼‰
  Match 8: BYE vs BYEï¼ˆè·³éï¼‰

å¯¦éš›è¦æ‰“ï¼š6 å ´
è‡ªå‹•æ™‰ç´šï¼š1 äºº
```

## ä½†æ˜¯ï¼éœ€è¦è™•ç† BYE vs BYE

ç•¶å‰ä»£ç¢¼çš„ `autoProgressByeMatches` åˆ¤æ–·ï¼š

```typescript
if (!winnerId) {
  console.warn(`Match has no players (both BYE)`);
  continue; // è·³é
}
```

**å•é¡Œ**ï¼šBYE vs BYE çš„æ¯”è³½æœƒè¢«è·³éï¼Œä½†å®ƒå€‘åœ¨æ¨¹ç‹€åœ–ä¸­ä½”äº†ä½ç½®ã€‚

**è§£æ±º**ï¼š

- ä¸å‰µå»º BYE vs BYE çš„æ¯”è³½
- æˆ–è€…å‰µå»ºä½†æ¨™è¨˜ç‚ºç‰¹æ®Šç‹€æ…‹

## å·²ä¿®å¾©ï¼

### ä¿®æ”¹å…§å®¹

1. **å„ªåŒ– BYE åˆ†é…ç­–ç•¥**

   - å…ˆæ´—ç‰ŒçœŸå¯¦é¸æ‰‹ï¼ˆä¿è­‰å…¬å¹³ï¼‰
   - å„ªå…ˆå…©å…©é…å°çœŸå¯¦é¸æ‰‹
   - å¥‡æ•¸æ™‚æœ€å¾Œä¸€å€‹é… BYE
   - å‰©é¤˜ä½ç½®å…¨æ˜¯ BYE

2. **è·³é BYE vs BYE**

   - ä¸å‰µå»ºç„¡æ„ç¾©çš„æ¯”è³½
   - æ¸›å°‘æ•¸æ“šåº«å¯«å…¥
   - é¿å…é¡¯ç¤ºæ··äº‚

3. **æ·»åŠ è©³ç´°æ—¥èªŒ**
   ```
   ğŸ¯ å„ªåŒ–é…å°ï¼š5 å ´çœŸå¯¦æ¯”è³½ + 0 å ´è¼ªç©º
   â­ï¸ Skipping BYE vs BYE match at position 6
   ```

### ä¿®å¾©æ•ˆæœ

**10 çµ„åƒè³½**ï¼š

- ä¿®å¾©å‰ï¼šéš¨æ©Ÿ 2-5 å ´çœŸå¯¦æ¯”è³½ï¼ˆå¹³å‡ 3.1 å ´ï¼‰
- ä¿®å¾©å¾Œï¼šå›ºå®š 5 å ´çœŸå¯¦æ¯”è³½

**13 çµ„åƒè³½**ï¼š

- ä¿®å¾©å‰ï¼šéš¨æ©Ÿ 3-6 å ´çœŸå¯¦æ¯”è³½
- ä¿®å¾©å¾Œï¼šå›ºå®š 6 å ´çœŸå¯¦æ¯”è³½ + 1 å ´è¼ªç©º

**ç¾åœ¨é‚è¼¯å®Œå…¨æ­£ç¢ºï¼Œæœ€å¤§åŒ–çœŸå¯¦æ¯”è³½æ•¸é‡ï¼** ğŸ‰
