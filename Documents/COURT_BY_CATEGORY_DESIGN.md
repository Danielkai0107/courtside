# å ´åœ°æŒ‰åˆ†é¡ç®¡ç†è¨­è¨ˆ

## ğŸ¯ æ‚¨çš„éœ€æ±‚ç†è§£

### ç•¶å‰è¨­è¨ˆï¼ˆå…¨å±€å ´åœ°ï¼‰
```
Tournament
â””â”€â”€ Courtsï¼ˆå…¨å±€ï¼‰
    â”œâ”€â”€ Court 01
    â”œâ”€â”€ Court 02
    â””â”€â”€ Court 03

å•é¡Œï¼š
- æ‰€æœ‰åˆ†é¡å…±ç”¨å ´åœ°
- ç„¡æ³•ç‚ºä¸åŒåˆ†é¡è¨­å®šå°ˆå±¬å ´åœ°
- åˆªé™¤æ¬Šé™å•é¡Œ
```

### å»ºè­°è¨­è¨ˆï¼ˆæŒ‰åˆ†é¡å ´åœ°ï¼‰

**é¸é … Aï¼šæŒ‰åˆ†é¡ç¨ç«‹å ´åœ°**
```
Tournament
â”œâ”€â”€ Category: ç”·å­é›™æ‰“
â”‚   â””â”€â”€ Courts
â”‚       â”œâ”€â”€ Court 01ï¼ˆç”·é›™å°ˆç”¨ï¼‰
â”‚       â””â”€â”€ Court 02ï¼ˆç”·é›™å°ˆç”¨ï¼‰
â”‚
â””â”€â”€ Category: å¥³å­å–®æ‰“
    â””â”€â”€ Courts
        â”œâ”€â”€ Court 03ï¼ˆå¥³å–®å°ˆç”¨ï¼‰
        â””â”€â”€ Court 04ï¼ˆå¥³å–®å°ˆç”¨ï¼‰
```

**å„ªé»**ï¼š
- æ¯å€‹åˆ†é¡æœ‰å°ˆå±¬å ´åœ°
- å¯ä»¥åŒæ™‚é€²è¡Œï¼ˆä¸è¡çªï¼‰
- ç®¡ç†æ›´æ¸…æ™°

**é¸é … Bï¼šå ´åœ°æ¨™ç±¤/åˆ†çµ„**
```
Tournament
â””â”€â”€ Courtsï¼ˆå…¨å±€ï¼‰
    â”œâ”€â”€ Court 01ï¼ˆæ¨™ç±¤ï¼šç”·é›™ï¼‰
    â”œâ”€â”€ Court 02ï¼ˆæ¨™ç±¤ï¼šç”·é›™ï¼‰
    â”œâ”€â”€ Court 03ï¼ˆæ¨™ç±¤ï¼šå¥³å–®ï¼‰
    â””â”€â”€ Court 04ï¼ˆæ¨™ç±¤ï¼šå¥³å–®ï¼‰
```

**å„ªé»**ï¼š
- ä¿æŒå…¨å±€ç®¡ç†
- å¯ä»¥æ¨™è¨˜ç”¨é€”
- éˆæ´»èª¿é…

## ğŸ’¡ æˆ‘çš„å•é¡Œ

**è«‹ç¢ºèªæ‚¨æƒ³è¦çš„æ˜¯**ï¼š

### 1. å ´åœ°æŒ‰åˆ†é¡ç¨ç«‹ï¼Ÿ
```
å ´åœ°ç®¡ç† Tab
  â”œâ”€â”€ [ç”·å­é›™æ‰“] [å¥³å­å–®æ‰“] â† Category Tabs
  â”‚      â†“ é¸ä¸­ç”·å­é›™æ‰“
  â”œâ”€â”€ Court 01ï¼ˆç”·é›™å°ˆç”¨ï¼‰
  â”œâ”€â”€ Court 02ï¼ˆç”·é›™å°ˆç”¨ï¼‰
  â””â”€â”€ [+ æ–°å¢å ´åœ°]ï¼ˆæ–°å¢åˆ°ç”·é›™ï¼‰
```

### 2. å ´åœ°å…¨å±€ä½†æ¨™è¨˜åˆ†é¡ï¼Ÿ
```
å ´åœ°ç®¡ç† Tab
  â”œâ”€â”€ Court 01ï¼ˆç”¨æ–¼ï¼šç”·å­é›™æ‰“ï¼‰
  â”œâ”€â”€ Court 02ï¼ˆç”¨æ–¼ï¼šç”·å­é›™æ‰“ï¼‰
  â”œâ”€â”€ Court 03ï¼ˆç”¨æ–¼ï¼šå¥³å­å–®æ‰“ï¼‰
  â””â”€â”€ [+ æ–°å¢å ´åœ°]ï¼ˆé¸æ“‡ç”¨æ–¼å“ªå€‹åˆ†é¡ï¼‰
```

### 3. å ´åœ°å…¨å±€ä½†åœ¨è³½ç¨‹ç®¡ç†ä¸­åˆ†é…ï¼Ÿ
```
å ´åœ°ç®¡ç† Tabï¼ˆå…¨å±€ï¼‰
  â”œâ”€â”€ Court 01
  â”œâ”€â”€ Court 02
  â””â”€â”€ Court 03

è³½ç¨‹ç®¡ç† Tab
  â”œâ”€â”€ [ç”·å­é›™æ‰“]
  â”‚   â””â”€â”€ ç™¼å¸ƒæ™‚è‡ªå‹•åˆ†é… Court 01, 02
  â””â”€â”€ [å¥³å­å–®æ‰“]
      â””â”€â”€ ç™¼å¸ƒæ™‚è‡ªå‹•åˆ†é… Court 03
```

## ğŸ”§ é—œæ–¼åˆªé™¤å•é¡Œ

### ç•¶å‰éŒ¯èª¤

å¯èƒ½æ˜¯ Firestore è¦å‰‡çš„å•é¡Œï¼š
```javascript
allow delete: if ... 
  get(/databases/$(database)/documents/tournaments/$(resource.data.tournamentId))
  // â†‘ åˆªé™¤æ™‚ resource.data å¯èƒ½ç„¡æ³•è¨ªå•
```

### ä¿®å¾©æ–¹æ¡ˆ

æ”¹ç‚ºåœ¨ courts æ–‡æª”ä¸­å­˜å„² organizerIdï¼š
```javascript
// å‰µå»ºæ™‚
{
  tournamentId: "xxx",
  organizerId: "ä¸»è¾¦æ–¹uid",  // æ–°å¢
  name: "Court 01",
  ...
}

// è¦å‰‡
allow delete: if isAuthenticated() && 
  resource.data.organizerId == request.auth.uid;
```

---

**è«‹å‘Šè¨´æˆ‘æ‚¨æƒ³è¦å“ªç¨®å ´åœ°ç®¡ç†æ–¹å¼ï¼Œæˆ‘ç«‹å³å¯¦æ–½ï¼** ğŸ¯

åŒæ™‚æˆ‘æœƒä¿®å¾©åˆªé™¤æ¬Šé™å•é¡Œã€‚

