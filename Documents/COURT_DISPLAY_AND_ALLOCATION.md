# å ´åœ°é¡¯ç¤ºèˆ‡åˆ†é…æ™‚æ©Ÿèªªæ˜

## ä¿®å¾©çš„å•é¡Œ

### 1. å ´åœ°é¡¯ç¤ºåç¨±è€Œé ID â­

**ä¿®å¾©å‰**ï¼š

```
å°çµ„è³½ï¼šCourt 01 é¡¯ç¤ºç‚º "abc123xyz"ï¼ˆcourtIdï¼‰
å°é™£åœ–ï¼šé¡¯ç¤º "abc123xyz"
è¨ˆåˆ†é é¢ï¼šé¡¯ç¤º "abc123xyz"
```

**ä¿®å¾©å¾Œ**ï¼š

```
å°çµ„è³½ï¼šé¡¯ç¤º "Court 01"ï¼ˆcourt.nameï¼‰
å°é™£åœ–ï¼šé¡¯ç¤º "Court 01"
è¨ˆåˆ†é é¢ï¼šé¡¯ç¤º "Court 01"
```

**å¯¦ç¾æ–¹å¼**ï¼š

```typescript
// è¼‰å…¥å ´åœ°åˆ—è¡¨
const courtsData = await getCourts(tournamentId);
setCourts(courtsData);

// Helper function
const getCourtName = (courtId) => {
  if (!courtId) return "å¾…åˆ†é…";
  const court = courts.find((c) => c.id === courtId);
  return court?.name || courtId;
};

// ä½¿ç”¨
{
  getCourtName(match.courtId);
}
```

### 2. CategoryDetail è¼‰å…¥å ´åœ°

- è¼‰å…¥å ´åœ°åˆ—è¡¨
- å°çµ„è³½æ¯”è³½é¡¯ç¤ºå ´åœ°åç¨±
- å°é™£åœ–é¡¯ç¤ºå ´åœ°åç¨±

### 3. ScoringConsole è¼‰å…¥å ´åœ°

- è¨‚é–±æ¯”è³½æ™‚åŒæ™‚è¼‰å…¥å ´åœ°
- å ´åœ°ä¿¡æ¯é¡¯ç¤ºåç¨±

---

## ğŸ• å ´åœ°åˆ†é…æ™‚æ©Ÿèªªæ˜

### ç™¼å¸ƒè³½ç¨‹æ™‚åˆ†é…ï¼ˆç¬¬ä¸€è¼ªï¼‰â­

```
ä¸»è¾¦æ–¹æ“ä½œï¼š
1. å ´åœ°ç®¡ç† â†’ æ–°å¢ Court 01, 02, 03
2. è³½ç¨‹ç®¡ç† â†’ é¸æ“‡åˆ†é¡ï¼ˆç”·å­é›™æ‰“ï¼‰
3. é¸æ“‡æ–¹æ¡ˆ â†’ é»æ“Šã€Œç™¼å¸ƒè³½ç¨‹ã€
   â†“
ç³»çµ±è‡ªå‹•åŸ·è¡Œï¼š
4. ç”Ÿæˆå°çµ„è³½/æ·˜æ±°è³½æ¯”è³½
5. ã€ç«‹å³åˆ†é…å ´åœ°ã€‘â­
   - å°çµ„è³½ï¼šæŒ‰å°çµ„å›ºå®šå ´åœ°
   - æ·˜æ±°è³½ç¬¬ä¸€è¼ªï¼šè¼ªæµåˆ†é…
6. å¯«å…¥ Firestore

çµæœï¼š
  å°çµ„è³½ï¼šå…¨éƒ¨å·²åˆ†é…å ´åœ°
  ç¬¬ä¸€è¼ªï¼šå…¨éƒ¨å·²åˆ†é…å ´åœ°
  ç¬¬äºŒè¼ªï¼šPENDING_PLAYERï¼ˆç­‰å¾…æ™‰ç´šï¼‰
```

### å ´åœ°åˆ†é…é‚è¼¯

#### å°çµ„è³½ï¼ˆç™¼å¸ƒæ™‚ï¼‰

```typescript
// generateGroupThenKnockout() ä¸­
const groupMatches = generateGroupStage(...);
assignCourtsToMatches(groupMatches, courts);  // â† ç«‹å³åˆ†é…

çµæœï¼š
  Group A æ‰€æœ‰æ¯”è³½ â†’ Court 01
  Group B æ‰€æœ‰æ¯”è³½ â†’ Court 02
  ...
  ç‹€æ…‹ï¼šSCHEDULEDï¼ˆå·²æ’ç¨‹ï¼‰
```

#### æ·˜æ±°è³½ç¬¬ä¸€è¼ªï¼ˆç™¼å¸ƒæ™‚ï¼‰

```typescript
// generateKnockoutOnly() ä¸­
const firstRoundMatches = matches.filter(m => m.round === 1);
assignCourtsToMatches(firstRoundMatches, courts);  // â† ç«‹å³åˆ†é…

çµæœï¼š
  R16 Match 1 â†’ Court 01
  R16 Match 2 â†’ Court 02
  R16 Match 3 â†’ Court 03
  R16 Match 4 â†’ Court 01ï¼ˆå¾ªç’°ï¼‰
  ...
  ç‹€æ…‹ï¼šSCHEDULEDï¼ˆå·²æ’ç¨‹ï¼‰
```

#### æ·˜æ±°è³½å¾ŒçºŒè¼ªæ¬¡ï¼ˆä¸åˆ†é…ï¼‰

```typescript
// generateKnockoutOnly() ä¸­
for (let round = 2; round <= totalRounds; round++) {
  const match = createMatchNode({
    player1Id: null,  // ç­‰å¾…æ™‰ç´š
    player2Id: null,
    courtId: null,    // â† ä¸åˆ†é…å ´åœ°
    status: "PENDING_PLAYER",
  });
}

çµæœï¼š
  QF, SF, FIï¼š
    - courtId: null
    - ç‹€æ…‹ï¼šPENDING_PLAYER
    - é¡¯ç¤ºï¼šã€Œå¾…åˆ†é…å ´åœ°ã€
```

### å¾ŒçºŒè¼ªæ¬¡ä»€éº¼æ™‚å€™åˆ†é…ï¼Ÿâ­

**ç•¶å‰å¯¦ç¾**ï¼šä¸è‡ªå‹•åˆ†é…

**åŸå› **ï¼š

- ç¬¬äºŒè¼ªæ¯”è³½è¦ç­‰ç¬¬ä¸€è¼ªå®Œæˆ
- æ™‚é–“ä¸ç¢ºå®š
- å¯èƒ½éœ€è¦èª¿æ•´å ´åœ°

**æœªä¾†å¯ä»¥å¯¦ç¾**ï¼š

1. ç¬¬ä¸€è¼ªå…¨éƒ¨å®Œæˆå¾Œï¼Œè‡ªå‹•åˆ†é…ç¬¬äºŒè¼ª
2. ä½¿ç”¨å ´åœ°èª¿åº¦ç³»çµ±ï¼ˆdispatchCourtToWaitingMatchï¼‰
3. æˆ–ä¸»è¾¦æ–¹ä½¿ç”¨ã€Œé‡æ–°åˆ†é…å ´åœ°ã€åŠŸèƒ½

**æ‰‹å‹•æ–¹å¼ï¼ˆç•¶å‰ï¼‰**ï¼š

```
ä¸»è¾¦æ–¹åœ¨è³½ç¨‹ç®¡ç† Tab
  â†“
é¸æ“‡åˆ†é¡
  â†“
é»æ“Šã€ŒğŸ”„ é‡æ–°åˆ†é…å ´åœ°ã€
  â†“
ç³»çµ±é‡æ–°åˆ†é…æ‰€æœ‰æœªé–‹å§‹çš„æ¯”è³½
  ï¼ˆåŒ…æ‹¬ç¬¬äºŒè¼ªï¼‰
```

---

## ğŸ“Š å®Œæ•´çš„å ´åœ°åˆ†é…æµç¨‹

### æ™‚é–“è»¸

```
T0: ç™¼å¸ƒè³½ç¨‹
  â”œâ”€ å°çµ„è³½ï¼šå…¨éƒ¨åˆ†é…
  â”œâ”€ R16ï¼šå…¨éƒ¨åˆ†é…
  â”œâ”€ QFï¼šä¸åˆ†é…ï¼ˆç­‰å¾…æ™‰ç´šï¼‰
  â”œâ”€ SFï¼šä¸åˆ†é…
  â””â”€ FIï¼šä¸åˆ†é…

T1: å°çµ„è³½/R16 é€²è¡Œä¸­
  â†’ å ´åœ°ç‹€æ…‹ï¼šIN_USE

T2: å°çµ„è³½/R16 å®Œæˆ
  â†’ é¸æ‰‹æ™‰ç´šåˆ° QF
  â†’ QF ç‹€æ…‹ï¼šPENDING_COURT

T3: ä¸»è¾¦æ–¹é‡æ–°åˆ†é…ï¼ˆå¯é¸ï¼‰â­
  â†’ QFï¼šåˆ†é…å ´åœ°
  â†’ ç‹€æ…‹ï¼šSCHEDULED

æˆ–

T3: å ´åœ°è‡ªå‹•èª¿åº¦ï¼ˆæœªä¾†å¯¦ç¾ï¼‰
  â†’ å ´åœ°ç©ºé–’æ™‚è‡ªå‹•åˆ†é…çµ¦ QF
```

---

## ğŸ“‹ ä¿®æ”¹æ¸…å–®

### ä¿®æ”¹æ–‡ä»¶ï¼ˆ2 å€‹ï¼‰

- `src/pages/CategoryDetail.tsx`
- è¼‰å…¥ courts
- æ·»åŠ  getCourtName helper
- å°çµ„è³½é¡¯ç¤ºå ´åœ°åç¨±
- å°é™£åœ–é¡¯ç¤ºå ´åœ°åç¨±

- `src/pages/scorer/ScoringConsole.tsx`
- è¼‰å…¥ courts
- æ·»åŠ  getCourtName helper
- å ´åœ°ä¿¡æ¯é¡¯ç¤ºåç¨±

### éƒ¨ç½²ç‹€æ…‹

- å·²æ§‹å»º
- å·²éƒ¨ç½²
- https://courtside-25c9e.web.app

## ğŸ¯ é¡¯ç¤ºæ•ˆæœ

### å°çµ„è³½æ¯”è³½åˆ—è¡¨

```
2024/12/21    Court 01  â† é¡¯ç¤ºåç¨±
Alice vs Bob    21-19
å·²å®Œæˆ
```

### å°é™£åœ–

```
Court 01      å·²å®Œæˆ  â† é¡¯ç¤ºåç¨±
Alice    21  âœ“
Bob      19
```

### è¨ˆåˆ†é é¢

```
æ¯”è³½ç‹€æ…‹ï¼šé€²è¡Œä¸­
å ´åœ°ï¼šCourt 01  â† é¡¯ç¤ºåç¨±
```

---

## ğŸŠ å®Œæˆ

**å ´åœ°é¡¯ç¤ºå’Œåˆ†é…æ™‚æ©Ÿèªªæ˜**

- æ‰€æœ‰é é¢é¡¯ç¤ºå ´åœ°åç¨±ï¼ˆä¸æ˜¯ IDï¼‰
- å°çµ„è³½ï¼šç™¼å¸ƒæ™‚ç«‹å³åˆ†é…
- ç¬¬ä¸€è¼ªï¼šç™¼å¸ƒæ™‚ç«‹å³åˆ†é…
- å¾ŒçºŒè¼ªæ¬¡ï¼šæ‰‹å‹•é‡æ–°åˆ†é…æˆ–ç­‰è‡ªå‹•èª¿åº¦
- æ™ºèƒ½åˆ†é…ç­–ç•¥ï¼ˆå°çµ„å›ºå®š + æ±ºè³½ä¸»å ´åœ°ï¼‰

**å ´åœ°ç®¡ç†åŠŸèƒ½å®Œæ•´ï¼** ğŸŸï¸

---

**ä¿®å¾©æ—¥æœŸ**: 2024 å¹´ 12 æœˆ 21 æ—¥  
**ç‹€æ…‹**: å·²å®Œæˆä¸¦éƒ¨ç½²
